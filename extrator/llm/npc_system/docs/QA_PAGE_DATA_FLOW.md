# QAé¡µé¢æ•°æ®æµå¯è§†åŒ–

> **å¿«é€Ÿå‚è€ƒ**: QAé¡µé¢çš„å®Œæ•´æ•°æ®æµç¨‹å›¾

---

## ğŸ¯ å½“å‰QAé¡µé¢ (æ˜Ÿçƒå¯¹è¯)

### å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·æµè§ˆå™¨                                 â”‚
â”‚                                                              â”‚
â”‚  1. è®¿é—® http://localhost:8000/qa/                          â”‚
â”‚  2. å¡«å†™è¡¨å•ï¼Œç‚¹å‡»"æäº¤"                                      â”‚
â”‚  3. POSTè¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Django WebæœåŠ¡å™¨                            â”‚
â”‚                                                              â”‚
â”‚  agent/urls.py                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  path("qa/", extratorView.qa_view)                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â†“                                      â”‚
â”‚  extrator/views.py                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  def qa_view(request):                             â”‚    â”‚
â”‚  â”‚      prompt = request.POST.get("prompt")           â”‚    â”‚
â”‚  â”‚      aimsg = test_chat_z.chat(prompt, session_id)  â”‚ â† å…³é”®ï¼
â”‚  â”‚      response = aimsg.get("msg")                   â”‚    â”‚
â”‚  â”‚      return render(request, "qa.html", {...})      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              extrator/llm/test_chat_z.py                     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  def chat(prompt, session_id):                     â”‚    â”‚
â”‚  â”‚      result = graph.invoke(...)                    â”‚    â”‚
â”‚  â”‚      return {"success": 1, "msg": "..."}           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LangGraphå·¥ä½œæµ                             â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  infoèŠ‚ç‚¹ â†’ æå–æ¸©åº¦/æ¹¿åº¦/é¢œè‰²                      â”‚    â”‚
â”‚  â”‚      â†“                                              â”‚    â”‚
â”‚  â”‚  åˆ¤æ–­æ˜¯å¦è°ƒç”¨å·¥å…·                                    â”‚    â”‚
â”‚  â”‚      â”œâ”€ æ˜¯ â†’ add_tool_messageèŠ‚ç‚¹                   â”‚    â”‚
â”‚  â”‚      â””â”€ å¦ â†’ ç»§ç»­å¯¹è¯                               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Ollama LLM                                  â”‚
â”‚                                                              â”‚
â”‚  POST http://localhost:11434/api/chat                       â”‚
â”‚  {                                                           â”‚
â”‚    "model": "qwen2.5",                                      â”‚
â”‚    "messages": [...]                                        â”‚
â”‚  }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
                    è¿”å›ç»“æœ
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Djangoæ¸²æŸ“HTML                              â”‚
â”‚                                                              â”‚
â”‚  agent/templates/qa.html                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  <h1>QA System</h1>                                â”‚    â”‚
â”‚  â”‚  <div class="chat-container">                      â”‚    â”‚
â”‚  â”‚    ç”¨æˆ·: æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªæ¸©åº¦20-30åº¦çš„æ˜Ÿçƒ              â”‚    â”‚
â”‚  â”‚    AI: æ‚¨å¥½ï¼æˆ‘ä»¬ä¸€èµ·è®¾ç½®æ‚¨çš„æ˜Ÿçƒç¯å¢ƒ...            â”‚    â”‚
â”‚  â”‚  </div>                                             â”‚    â”‚
â”‚  â”‚  <form method="post">                              â”‚    â”‚
â”‚  â”‚    <textarea name="prompt"></textarea>             â”‚    â”‚
â”‚  â”‚    <button>æäº¤</button>                           â”‚    â”‚
â”‚  â”‚  </form>                                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
                  è¿”å›ç»™æµè§ˆå™¨
```

---

## ğŸ”„ ä¿®æ”¹ä¸ºé€šç”¨å¯¹è¯ (general_chat)

### ä¿®æ”¹ç‚¹

```python
# extrator/views.py ç¬¬62è¡Œ

# åŸä»£ç  (æ˜Ÿçƒå¯¹è¯)
aimsg = test_chat_z.chat(prompt, session_id)
response = aimsg.get("msg", "æ— æ³•è·å–å›å¤")

# ä¿®æ”¹ä¸º (é€šç”¨å¯¹è¯)
result = general_chat.chat(prompt, session_id)
response = result.get("msg", "æ— æ³•è·å–å›å¤")
```

### ä¿®æ”¹åçš„æµç¨‹

```
æµè§ˆå™¨ â†’ Django (qa_view) â†’ general_chat.py â†’ LangChain â†’ Ollama
                                    â†“
                            ç®€å•çš„å¯¹è¯é“¾
                            (ç³»ç»Ÿæç¤ºè¯ + å†å² + è¾“å…¥)
                                    â†“
                            è¿”å›è‡ªç„¶è¯­è¨€å›å¤
```

---

## ğŸ® ä¿®æ”¹ä¸ºNPCå¯¹è¯

### ä¿®æ”¹ç‚¹

```python
# extrator/views.py

# æ·»åŠ å¯¼å…¥
from .llm.npc_system.npc_manager import NPCManager

# ä¿®æ”¹ qa_view å‡½æ•°
def qa_view(request):
    if request.method == "POST":
        prompt = request.POST.get("prompt", "")
        npc_id = request.POST.get("npc_id", "blacksmith")
        
        # ä½¿ç”¨NPCç³»ç»Ÿ
        manager = get_npc_manager()
        result = manager.chat(npc_id, player_id, prompt)
        response = result.get("reply", "æ— æ³•è·å–å›å¤")
```

### ä¿®æ”¹åçš„æµç¨‹

```
æµè§ˆå™¨ â†’ Django (qa_view) â†’ NPCManager â†’ NPCAgent
                                            â†“
                                    10æ­¥å¯¹è¯å¤„ç†
                                            â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â†“                   â†“                   â†“
                    è®°å¿†æ£€ç´¢            RAGæ£€ç´¢            å¥½æ„Ÿåº¦æŸ¥è¯¢
                        â†“                   â†“                   â†“
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†“
                                    ä¸Šä¸‹æ–‡æ„å»º
                                            â†“
                                    LLMç”Ÿæˆå›å¤
                                            â†“
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â†“                   â†“                   â†“
                    æ›´æ–°å¥½æ„Ÿåº¦          ä¿å­˜å¯¹è¯            æ›´æ–°è®°å¿†
                        â†“                   â†“                   â†“
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†“
                                    è¿”å›ç»“æœ + å¥½æ„Ÿåº¦
```

---

## ğŸ“Š ä¸‰ç§ç³»ç»Ÿå¯¹æ¯”

### æ•°æ®æµå¯¹æ¯”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æ˜Ÿçƒå¯¹è¯ (test_chat_z)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·è¾“å…¥ â†’ LangGraphçŠ¶æ€æœº â†’ å·¥å…·è°ƒç”¨ â†’ ç»“æ„åŒ–è¾“å‡º          â”‚
â”‚  ç‰¹ç‚¹: å¤æ‚ã€ä»»åŠ¡å¯¼å‘ã€ç»“æ„åŒ–                                 â”‚
â”‚  å“åº”æ—¶é—´: 2-3ç§’                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  é€šç”¨å¯¹è¯ (general_chat)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·è¾“å…¥ â†’ ç®€å•å¯¹è¯é“¾ â†’ LLM â†’ è‡ªç„¶è¯­è¨€è¾“å‡º                  â”‚
â”‚  ç‰¹ç‚¹: ç®€å•ã€å¿«é€Ÿã€é€šç”¨                                       â”‚
â”‚  å“åº”æ—¶é—´: 1-2ç§’                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  NPCå¯¹è¯ (npc_system)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·è¾“å…¥ â†’ è®°å¿†æ£€ç´¢ â†’ RAG â†’ å¥½æ„Ÿåº¦ â†’ ä¸Šä¸‹æ–‡ â†’ LLM â†’ è¾“å‡º    â”‚
â”‚  ç‰¹ç‚¹: å¤æ‚ã€è§’è‰²æ‰®æ¼”ã€è®°å¿†è¿è´¯                               â”‚
â”‚  å“åº”æ—¶é—´: 3-5ç§’                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ å…³é”®ä»£ç ä½ç½®

### 1. URLè·¯ç”±
```
agent/urls.py ç¬¬24è¡Œ
path("qa/", extratorView.qa_view, name="qa_view")
```

### 2. è§†å›¾å‡½æ•°
```
extrator/views.py ç¬¬45-75è¡Œ
def qa_view(request):
    ...
    aimsg = test_chat_z.chat(prompt, session_id)  â† ç¬¬62è¡Œï¼Œä¿®æ”¹è¿™é‡Œï¼
    ...
```

### 3. HTMLæ¨¡æ¿
```
agent/templates/qa.html
<form method="post">
    <textarea name="prompt"></textarea>
    <button type="submit">æäº¤</button>
</form>
```

### 4. å¯¹è¯ç³»ç»Ÿ
```
extrator/llm/test_chat_z.py  â† æ˜Ÿçƒå¯¹è¯
extrator/llm/general_chat.py â† é€šç”¨å¯¹è¯
extrator/llm/npc_system/     â† NPCå¯¹è¯
```

---

## ğŸš€ å¿«é€Ÿä¿®æ”¹æ­¥éª¤

### ä¿®æ”¹ä¸ºé€šç”¨å¯¹è¯ (3æ­¥)

```bash
# 1. ç¼–è¾‘æ–‡ä»¶
vim extrator/views.py

# 2. æ‰¾åˆ°ç¬¬62è¡Œï¼Œä¿®æ”¹ä¸º:
result = general_chat.chat(prompt, session_id)
response = result.get("msg", "æ— æ³•è·å–å›å¤")

# 3. é‡å¯Django
# Ctrl+C åœæ­¢
python manage.py runserver 0.0.0.0:8000
```

### ä¿®æ”¹ä¸ºNPCå¯¹è¯ (5æ­¥)

```bash
# 1. ç¼–è¾‘ views.pyï¼Œæ·»åŠ å¯¼å…¥
from .llm.npc_system.npc_manager import NPCManager

# 2. æ·»åŠ  get_npc_manager() å‡½æ•°

# 3. ä¿®æ”¹ qa_view å‡½æ•°

# 4. ç¼–è¾‘ qa.htmlï¼Œæ·»åŠ NPCé€‰æ‹©ä¸‹æ‹‰æ¡†

# 5. é‡å¯Django
```

---

## ğŸ“ æ€»ç»“

### ä¸ºä»€ä¹ˆæ˜¯æ˜Ÿçƒå¯¹è¯ï¼Ÿ
- `qa_view` å‡½æ•°è°ƒç”¨äº† `test_chat_z.chat()`
- `test_chat_z` æ˜¯æ˜Ÿçƒç¯å¢ƒå¯¹è¯ç³»ç»Ÿ

### å¦‚ä½•ä¿®æ”¹ï¼Ÿ
- **ç®€å•**: ä¿®æ”¹ `views.py` ç¬¬62è¡Œ
- **å®Œæ•´**: åˆ›å»ºæ–°çš„è§†å›¾å‡½æ•°å’ŒHTMLæ¨¡æ¿

### æ•°æ®æµæ ¸å¿ƒ
```
æµè§ˆå™¨ â†’ Django â†’ å¯¹è¯ç³»ç»Ÿ â†’ LLM â†’ è¿”å›
```

**å…³é”®**: ä¿®æ”¹ `views.py` ä¸­è°ƒç”¨çš„å¯¹è¯ç³»ç»Ÿå³å¯ï¼

---

**ç°åœ¨ä½ å®Œå…¨ç†è§£QAé¡µé¢çš„æ„å»ºæµç¨‹äº†ï¼** ğŸ‰
